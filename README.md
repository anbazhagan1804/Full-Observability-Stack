# Full Observability Stack

This project sets up a complete observability stack for monitoring distributed microservices applications. It includes tools for metrics collection, log aggregation, and distributed tracing, all integrated to provide a comprehensive view of your application's performance and behavior.
Note : Its a prototype and not a complete one.

## Components

### Observability Tools

- **Prometheus**: Metrics collection and storage
- **Grafana**: Visualization of metrics, logs, and traces
- **Loki**: Log aggregation and querying
- **Promtail**: Log collection and forwarding to Loki
- **Tempo**: Distributed tracing storage and querying
- **OpenTelemetry Collector**: Collection, processing, and exporting of telemetry data

### Sample Microservices

- **API Gateway**: Nginx-based gateway that routes requests to the appropriate service
- **Service A**: Node.js service that calls Service B
- **Service B**: Node.js service with MongoDB integration
- **MongoDB**: Database used by Service B

## Architecture

The architecture follows modern observability practices:

1. **Metrics**: Collected by Prometheus from all services
2. **Logs**: Collected by Promtail and stored in Loki
3. **Traces**: Generated by OpenTelemetry instrumentation and stored in Tempo
4. **Correlation**: Trace IDs are included in logs for correlation between traces and logs

## Getting Started

### Prerequisites

- Docker and Docker Compose
- Git

### Setup

1. Clone this repository:https://github.com/anbazhagan1804/Full-Observability-Stack

```bash
git clone <https://github.com/anbazhagan1804/Full-Observability-Stack>
cd full-observability-stack
```

2. Start the stack:

```bash
docker-compose up -d
```

3. Access the services:

- Grafana :
- Prometheus :
- Loki: 
- Tempo: 
- Sample Application: 

## Using the Observability Stack

### Viewing Metrics

1. Open Grafana at http://localhost:3000
2. Navigate to the "Microservices Observability Dashboard"
3. View metrics such as request rate, response time, and error rate

### Viewing Logs

1. In Grafana, go to Explore
2. Select the Loki data source
3. Query logs with LogQL

### Viewing Traces

1. In Grafana, go to Explore
2. Select the Tempo data source
3. Search for traces or navigate from logs with trace IDs

### Correlation

The stack is configured to correlate metrics, logs, and traces:

1. From a log entry with a trace ID, click on the trace ID to view the corresponding trace
2. From a trace, view related logs and metrics
3. From a service graph, drill down into specific services and their traces

## Advanced Features

### Custom Metrics

Both Service A and Service B expose custom metrics:

- Request counters
- Response time histograms
- Database operation histograms (Service B)

### Trace Context Propagation

Trace context is propagated between services using HTTP headers, allowing for end-to-end tracing of requests across the distributed system.

### Log Correlation

Logs include trace IDs and span IDs, enabling correlation between logs and traces.

## Extending the Stack

### Adding New Services

1. Add the service to the `docker-compose.yml` file
2. Instrument the service with OpenTelemetry
3. Configure Prometheus to scrape metrics from the new service

### Customizing Dashboards

1. Create new dashboards in Grafana
2. Add panels for metrics, logs, and traces
3. Use variables to make dashboards dynamic

## Troubleshooting

### Common Issues

- **Services not starting**: Check Docker logs with `docker-compose logs <service-name>`
- **Missing data in Grafana**: Verify that data sources are configured correctly
- **No traces appearing**: Check OpenTelemetry configuration and ensure trace context is being propagated

## License

This project is licensed under the MIT License - see the LICENSE file for details.
